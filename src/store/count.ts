import { create } from "zustand"; // zustand store ìƒì„±í•˜ëŠ” í•¨ìˆ˜

// zustand ì˜ storeë€ ì „ì—­ ìƒíƒœì¸ stateì™€ í•´ë‹¹ ìƒíƒœë¥¼ ì‹¤ì œë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ”
// ì•¡ì…˜ í•¨ìˆ˜ë“¤ì´ í¬í•¨ëœ ê°ì²´

// ë°˜í™˜í•˜ëŠ” ê°ì²´ê°€ storeì˜ ê°ì²´ë¡œ ì„¤ì • ë¨
// create(() => {
//   return {
//     count: 0,
//     increse: () => {},
//     decrease: () => {},
//   };
// });

// ëŒ€ë¶€ë¶„ return ì‚¬ìš©ì•ˆí•˜ê³  í™”ì‚´í‘œ í•¨ìˆ˜ ì‚¬ìš©ì‹œ ë°”ë¡œ ë°˜í™˜ê°’ ì‘ì„±í•¨
create(() => ({ count: 0, increse: () => {}, decrease: () => {} }));

// increse, decreaseí•¨ìˆ˜ë¥¼ ì´ìš©í•´ countê°’ ë³€í™”ì‹œí‚¤ê¸°
// â†’ createí•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì œê³µë˜ëŠ” set, get í•¨ìˆ˜ ì´ìš©í•˜ê¸°
// get : ê°ì²´ ìŠ¤í† ì–´ë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ëŠ” ì—­í• 
//             âŒˆ-----ì—¬ê¸° ë¶€ë¶„ ê°ì²´ ìŠ¤í† ì–´ì„----------------------âŒ‰
// set : ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ ê°’ìœ¼ë¡œ í˜„ì¬ ìŠ¤í† ì–´ë¥¼ ì—…ë°ì´íŠ¸ ì‹œì¼œì£¼ëŠ” í•¨ìˆ˜
create(() => ({ count: 0, increse: () => {}, decrease: () => {} }));

create((set, get: any) => ({
  count: 0,
  increse: () => {
    const count = get().count;
    set({ count: count + 1 });
  },
  decrease: () => {},
}));

// immerê°™ì€ ëŠë‚Œìœ¼ë¡œ setë©”ì†Œë“œì˜ ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ í”„ë¡œí¼í‹° ê¸°ì¤€ìœ¼ë¡œ
//  í•´ë‹¹ í”„ë¡œí¼í‹°ë§Œ ì—…ë°ì´íŠ¸í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ìœ ì§€ì‹œì¼œì¤Œ

type Store = {
  count: number;
  increase: () => void;
  decrease: () => void;
};

/**
 * ğŸ“ƒ set í•¨ìˆ˜ëŠ” í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ë¥¼ ì§€ì›í•¨
 *    í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ë€
 *    â†’ ì¸ìˆ˜ë¡œ callback í•¨ìˆ˜ë¥¼ ë„£ì–´ì¤Œìœ¼ë¡œì¨ ì½œë°±í•¨ìˆ˜ê°€ ë¦¬í„´í•˜ëŠ” ê°’ìœ¼ë¡œ ìŠ¤í† ì–´ë¥¼ ì—…ë°ì´íŠ¸ ì‹œí‚´
 *    â†’ set í•¨ìˆ˜ëŠ” ë§¤ê°œë³€ìˆ˜ë¡œ í˜„ì¬ ìŠ¤í† ì–´ì˜ ê°’ì´ ì œê³µë¨
 *      ìœ„ì™€ ê°™ì€ í•¨ìˆ˜ë¥¼ ëœ»í•˜ë©° ëŒ€ë¶€ë¶„ì€ getë©”ì„œë“œ ì“¸ í•„ìš”ì—†ì´ set ë©”ì„œë“œë¥¼ í†µí•´ í•œë²ˆì— ì²˜ë¦¬
 */

create((set, get) => ({
  count: 0,
  increse: () => {
    set((store: any) => {
      return { count: store.count + 1 };
    });
  },
  decrease: () => {},
}));

// ë” ê°„ê²°í•œ ì½”ë“œë¡œë„ ì‘ì„± ê°€ëŠ¥í•¨
create((set, get) => ({
  count: 0,
  increase: () => {
    set((store: any) => ({
      count: store.count + 1,
    }));
  },
}));

// decreaseë„ êµ¬í˜„í•´ë³´ê¸°
// create íƒ€ì… ë³€ìˆ˜ ì œë„¤ë¦­ìœ¼ë¡œ ì •ì˜í•˜ê¸°

create<Store>((set, get) => ({
  count: 0,
  increase: () => {
    set((store) => ({
      count: store.count + 1,
    }));
  },
  decrease: () => {
    set((store) => ({
      count: store.count - 1,
    }));
  },
}));

/**
 * ğŸ“ƒ zustandì˜ create() í•¨ìˆ˜ëŠ” store ìƒì„±í•˜ëŠ” ë°ì— ê·¸ì¹˜ì§€ ì•Šê³ 
 * ë³¸ì¸ì´ ìƒì„±í•œ ìŠ¤í† ì–´ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë¦¬ì•¡íŠ¸ í›…ì„ ë°˜í™˜í•˜ê¸°ê¹Œì§€ í•¨
 */

export const useCountStore = create<Store>((set, get) => {
  return {
    count: 0,
    increase: () => {
      set((store) => ({
        count: store.count + 1,
      }));
    },
    decrease: () => {
      set((store) => ({
        count: store.count - 1,
      }));
    },
  };
});

// â†’ react ì»´í¬ë„ŒíŠ¸ë¼ë©´ useCountStore í›…ì„ ë¶ˆëŸ¬ ê°ì²´ í˜•íƒœì˜ storeì— ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì§
