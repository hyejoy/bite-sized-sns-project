# middle ware

- 중간에 있는 도구로 해석
- 특정 로직에 순차적인 동작이 있을때 중간에 끼어 추가적인 작업을 진행하는 도구를 뜻함

## zustand middleward 종류

- 1. combine : Store의 타입을 자동 추론
- 2. immer : Store 내부의 상태 업데이트를 보다 편리하게 바꿈
- 3. subscribeWithSelectore: Store 내의 특정 값 변화시 이벤트 핸들러 호출
- 4. persist : Store를 로컬, 세션 스토리지에 보관
- 5. devtools : Store의 값을 개발자 도구에서 확인할 수 있음

### 이전 코드

```jsx
    export const useCounterStore = create<StoreType>(
        count: 0,
        actions: {
            increase: () => {
            set((store) => ({ count: store.count + 1 }));
            },
            decrease: () => {
            set((store) => ({ count: store.count - 1 }));
            },
        },
    );
```

### combine

- state와 action 함수들을 통으로 한꺼번에 객체에 넣는 방식이 아니라
  state끼리, action함수끼리 서로 분리해서 작성한다음에 결합시키는 방식으로 정의할 수 있도록 도와준다.
- 타입스크립트가 store의 타입을 더 정확히 추론할 수 있도록 만들어 줌
- 첫번째 인수를 기준으로 state 타입이 자동으로 추론되어 별도의 타입을 정의해주지 않아도 된다.
- **첫번째 인수**로는 스토어에 포함될 **state**
- **두번째 인수** 로는 콜백 함수로 매개변수 set, get을 받아와 **액션 함수들을 포함한 객체를 반환**

  ```jsx
  export const useCounterStore = create(
    combine(
      {
        count: 0,
        name: '이름',
        age: 11,
      },
      (set, get) => ({
        actions: {
          increase: () => {
            set((state) => ({ count: state.count + 1 }));
          },
          decrease: () => {
            set((state) => ({ count: state.count - 1 }));
          },
        },
      })
    )
  );

    // get함수에서 자동 추론됨
    (parameter) get: () => {
        count: number;
        name: string;
        age: number;
    }
  ```

### immer

- 액션함수의 상태 업데이트를 보다 편리하고 간단한 코드로 진행할 수 있도록 불변성 관리를 도와줌
- 업데이트 해야하는 구조가 중첩이 된다거나 복잡해지면 업데이트 코드가 복잡해지는데 이런 문제를 해결해줌
- **immer 설치 진행** : npm i immer
- 인수로 combine 함수의 호출 결과값을 전달하도록 하면됨

  ```jsx
  // 1️⃣ immer(combine) 형태
      export const useCounterStore = create(
      immer(
          combine(
          {
              count: 0,
              name: '최혜조',
              age: 30,
          },
          (set, get) => ({
              actions: {
              increase: () => {
                  set((state) => {
                  state.count += 1;
                  });
              },
              decrease: () => {
                  set((state) => {
                  state.count -= 1;
                  });
              },
              },
          })
          )
      )
      );

  // 2️⃣ immer 단독 사용
  export const useCounterStore = create<CounterStore>()(
  immer((set) => ({
      count: 0,
      increase: () => set((state) => { state.count += 1 }),
  }))
      );
  ```

### subscribeWithSelector

### persist

### devtools

```

```
