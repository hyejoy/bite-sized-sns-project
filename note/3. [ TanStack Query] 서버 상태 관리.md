# React 앱의 상태 분류

- 지역 상태 : 특정범위에서만 접근 가능
  - 인풋 태그의 사용자 입력 값
- 전역 상태 : 전체 컴포넌트에서 접근 가능
  - 앱의 테마 데이터, 세션 정보 데이터

- API의 요청과 관련된 데이터들은 직접 관리해야 되는 데이터의 가짓수가 너무 많아
  Zustand를 활용해 전역으로 관리하기엔 무리가 있음
- 그렇다고 지역 상태로 관리하기엔 여러 컴포넌트에서 데이터에 접근하기가 어려움, 코드도 복잡해짐
- 실무에서는 보통 **서버 상태** 유형으로 관리함
- 서버 상태 관리를 위한 라이브러리인 **TanStack Query**를 사용한다.
  ![alt text](image.png)

## TanStack Query

```jsx
// example
export default function Component() {
    const {data, isLoading, error} = useQuery(...);
    if(error) return <div>오류 발생</div>
    if(isLoading) return <div>로딩 중 입니다..</div>
    return <div>{data}</div>
}
```

- 요청이 실패 했을 때 **retry**라는 옵션을 통해 다시 한번 요청을 보낼 수도 있고
  캐시값을 이용해 중복 요청을 방지하는 등의 서버 상태 관리를 위한 굉장히 다양한 기능들이 제공된다.
- TanStack Query는 비동기 요청의 상태를 매우 편리하게 관리하도록 도와주는 다양한 기능들을 제공하고 있다.
